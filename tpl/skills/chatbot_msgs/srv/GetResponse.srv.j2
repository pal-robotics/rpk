# A request for a chatbot to provide a response to a given user input.

# The ID of the user which generated the text.
# The use of the ID depends on the chatbot implementation.
# For example, in order of complexity, the ID could be:
# - ignored
# - used to distinguish between different users
# - used to distinguish between different users, replacing the ID with the user's name by accessing a database
#
# If the text is generated by the system, the value should be set to SYSTEM_USER_ID's value.
# This is generally the case when the system either requires to initiate a conversation or verbalize a system state.
string user_id
string SYSTEM_USER_ID = system

# The model used to process the text.
string model

# (Optional) The desired locale, using following format:
# the [ISO 639-1 language code](https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes), lower-case
# followed by an underscore,
# followed by the [ISO 3166-1 alpha-2 region code](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2), upper-case.
# For example, 'en_GB' specifies British English.
# If not provided, the system should use the default locale.
string locale

# The text for which a response is requested.
#
# If the user_id is not SYSTEM_USER_ID's value, the value is the user's input in plain text.
# E.g., "Hi, what is your name?"
# 
# Otherwise, if the user_id is SYSTEM_USER_ID's value, the text is the system-generated data input.
# The data format depends on the chatbot implementation and the specific model used.
#
# For instance, an LLM-based chatbot might use both plain text and/or structured data.
# Either one of the following could be valid:
# - "A person with user_id 1234 is approaching you, greet him politely."
# - "{"action": "greet", "target": "1234", "modifiers": ["polite"]}" (no predefined fields JSON format)
# - "{"intent": "__intent_greet__", "data": {"agent": "system", "recipient": "1234", "manner": "polite"}, "source": "__myself__", "modality": "__modality_speech__"}" (hri_actions_msgs/Intent JSON format)
#
# On the other hand, a classic chatbot might instead use only structured data,
# where the fields should match the internal variables used by the specific chatbot model.
string input

---
# The text of the response to the request.
# It might be left empty if no suitable response can be generated in the given context.
# E.g., if an intent was detected, the response might depend on how the intent is handled by the system.
# In this case, a verbalized response might be solicited with a second request, using the intent processing result as system input.
string response

# The list of intents that were detected in the request or generated in response.
# The intents are in order of relevance, with the most relevant one first.
# It might be left empty if no intent is detected.
hri_actions_msgs/Intent[] intents

# The error message.
# This is not empty only if the request could not be fully processed.
string error
